8.网络层中  CIDR
无类域间路由   消除传统ABC地址界限 融合子网地址与子网掩码方便子网划分 
提高IPv4地址空间分配效率 提高路由效率（多个子网聚合/构造超网（大子网）/路由聚合）
避免路由黑洞

DHCP协议
硬编码（静态配置）   动态主机配置协议DHCP    从服务器动态获取IP 子网掩码 默认网关 DNS     即插即用     允许地址重用      在用地址续租     移动用户加入网
主机广播   DHCP发现报文       DHCP服务器利用提供报文响应       主机请求报文           DHCP确认报文
DHCP discover     offer     request      ACK
在应用层实现  请求报文封装到UDP数据报   IP广播   链路网广播

网络地址转换NAT
动机：只需从ISP申请一个IP地址（地址耗尽）     本地网络设备IP改变无需通告外界         变更ISP无需修改内部网络IP地址        内部网络设备对外界不可见（安全）
实现：替换（利用NAT替换外出IP数据报的地址端口号） 记录（存储到NAT转换表）  替换（利用转换表替换进入内网IP数据报的地址端口号）
16-bit端口号字段：可同时支持60000多行并行连接    争议：路由器应只处理第3层功能 违背端到端通信原则 地址短缺应由IPv6解决
NAT穿透问题    1将特定端口连接请求转发给服务器  2利用UPnP互联网网关设备协议（学习公共IP，在转换表中增删端口映射）   3中继Skype 中继服务器桥接两个连接的分组

ICMP互连网控制报文协议
支持主机或路由器（差错报告/网络探寻）     两类ICMP报文（差错报告报文 目的不可达/源抑制/ 超时/超期 /参数问题/重定向；  网络探寻报文 回声请求ping/应答报文  时间戳请求与应答报文）  
例外：差错报文再差错 后续分片不发送 多播IP不发送 特殊地址不发
应用 Traceroute

IPv6
动机：地址匮乏  改进首部格式（快速处理/转发数据报   支持QoS）  格式 固定长度40字节基本首部 不许分片     基本首部 选项首部 数据部分 后两个统称载荷
优先级 流标签 下一个首部
其他改变  校验和移除以减少每跳处理时间  允许选项定义多个选项首部  ICMPv6新版ICMP
地址表示形式：冒号分隔16bit   一般形式/压缩形式（两个冒号）  IPv4嵌入形式   不再使用掩码   URLs使用中括号再冒号端口号
地址类型：单播一对一通信  多播一对多  任意播（一对一组之一）
过渡 不可能同时更新    隧道技术：同时IPv6数据报作为IPv4数据报载荷进行封装 穿越
