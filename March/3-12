10.数据链路层
术语：主机路由器 结点nodes     连接相邻结点的通信信道 链路links 有线 无线 局域网     链路层数据分组 帧frame 封装网络层数据报
负责通过一条链路从一个节点向另一个物理链路直接相连的相邻节点传送数据报
链路层服务  组帧 封装数据报构成数据帧 加首部尾部   帧同步                链路接入 共享机制需要解决信道接入  帧首部中MAC地址用于标识帧的源和目的           相邻结点间可靠交付  低误码率有线链路上很少采用   无线链路 误码率高需可靠交付
                   流量控制 协调相邻的发送结点和接受          差错检测 信号衰减和噪声引起差错 接收端检查后通知重传货直接丢弃          差错纠正 接收端直接纠正比特差错      全双工/半双工   同时/交替

差错编码
原理：D->DR R为差错检测与纠正比特 冗余  监督位       不保证100%可靠
检错能力  差错编码分为检错码 纠错码    检错码 如果编码集的汉明距离=r+1 则差错编码可检测r位差错            纠错码 如果编码集汉明距离=2r+1 则可纠正r位差错（概率化纠错 最近）
奇偶校验码   1比特校验位检验奇数位差错      二维奇偶校验 检测基数位 部分偶数位 纠正同一行/列奇数位错
Internet校验和  Checksum     将数据划分为16位二进制  补码求和  校验和sum反码   放入分组校验           接收端 同样算法计算  计算checksum16位全0/全1
循环冗余校验码CRC  广泛应用于实际网络以太 802.11 ATM 

多路访问控制MAC协议     两类链路 点对点链路 拨号接入PPP 以太网交换机与主机间点对点链路  广播链路（共享介质）  早期总线以太网 HFC上行链路 802.11无线局域网
单一共享广播信道  两个或两个以上结点同时传输：干扰 冲突 同时接受两个或多个信号接受失败     多路访问控制协议 采用分布式算法决定何时传输如何共享  基于信道本身通过信道共享信息
理想MAC协议   给定速率R bps广播信道      期望只有1个结点可以以速率R发送   m个平局速率   完全分散控制   简单
分类：信道划分MAC（多路复用技术 TDMA FDMA CDMA WDMA）  随机访问MAC协议（信道不划分允许冲突 采用冲突‘恢复’机制）   轮转MAC协议（结点轮流使用信道）
TDMA 周期性接入信道   每个周期占用固定长度时隙  未用时隙空闲
FDMA 信道频谱划分若干频带  每个站点分配固定频带  无传输频带空闲

随机访问MAC
当结点要发送分组时 利用信道全部数据速率R发送分组 没有事先结点间协调    两个或多个结点同时传输 冲突      随机访问MAC协议需要定义 如何检测冲突 如何从冲突中恢复（延迟重传）    典型的协议：时隙ALOHA ALOHA  CSMA    /CD /CA
时隙ALOHA  假定所有帧大小相同 时间划分为等长时隙 结点只能在时隙开始时刻发送帧 结点间时钟同步 如果2个或2个以上结点在同一时隙发送帧节点检测到冲突             运行：有新的帧时下一个时隙发送 无冲突则下一时隙继续发送新的帧  如果冲突在下一时隙以概率p重传至成功
优点：单个节点可以利用全部速率  高度分散化  简单              缺点：冲突浪费时隙   空闲时隙    节点也许能以远小于分组传输时间检测到冲突      时钟同步
效率：长期运行成功发送所占的比例37% 最好情况
ALOHA 更加简单无需同步  当有新帧生成 立即发送     冲突可能性增大      比例18%

CSMA协议 载波监听多路访问协议    发送帧之前监听信道：信道空闲发送完整帧    信道忙 1-坚持  非坚持   p-坚持     冲突仍可能发生 信号传播延迟
CSMA/CD带冲突检测  短时间内检测到冲突  冲突后传输中止减少浪费      冲突检测：有线易于实现 测量强度比较发射与接收      无线很难实现 接受强度淹没在本地发射信号强度下         边发边听 不发不听

轮转访问
信道划分 网络负载重 共享效率高且公平      网络负载轻 共享信道效率低           随机访问 负载轻效率高 网络负载重产生冲突开销
轮转：结合两者优点
轮询：主节点轮流邀请从属结点发送数据   典型应用 ‘哑’从属设备    问题 轮询开销 等待延迟 单点故障
令牌传递  控制令牌依次从一个结点传递到下一个结点  令牌：特殊帧  问题 令牌开销 等待延迟 单点故障
蓝牙  FDDI  令牌环网
