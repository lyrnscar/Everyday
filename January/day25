5.2凝聚聚类
指许多基于相同原则构建的聚类算法
这一原则：算法首先声明每个点是自己的簇，然后合并两个最相似的簇，直到满足某种停止准则为止
sci中实现的停止准则是簇的个数字，相似的簇被合并，直到仅剩下指定个数的簇
还有一些链接准则规定如何度量最相似的簇，这种准则总是定义在两个现有簇之间
sci中实现了以下三种选项
ward默认选项，挑选两个簇合并使所有簇中方差增加最小，通常能得到大小类似的簇
average链接将簇中所有点之间平均距离最小的两个簇合并
complete链接（最大链接）将簇中点之间最大距离最小的两个簇合并

ward适用大部分数据集，如果簇中成员个数非常不同则另两种可能效果更好

最开始每个点自成一簇，在每一个步骤中相距最近的两个簇被合并
凝聚算法不能对新数据点作出预测
agglomerativeclustering没有predict方法，为构造模型并得到训练集上的簇的成员关系，可以改用fit_predict方法，如同k均值的labels_属性

5.2.1
层次聚类与树状图
凝聚聚类生成了层次聚类，过程迭代进行，每个点都从一个单点簇变成属于最终的某个簇，每个中间步骤都提供了数据的一种聚类，簇的个数也不相同
这种可视化为层次聚类提供了详细的视图，依赖于数据的二维性质，不能用于两个以上特征的数据集
树状图可以处理多维数据集
我们可以利用scipy生成树状图，它提供函数dendrogram接受X并计算出一个链接数组，对层次聚类的相似度进行编码
树状图在底部显示数据点，然后以这些点（表示单点簇）作为叶节点绘制一棵树，每合并两个簇添加一个新的父节点
x轴表示数据点，y轴表示凝聚算法两个簇何时合并，分支长度表示被合并的簇之间距离
在例子中即合并的过程中跨越了相对较大的距离
但是凝聚聚类仍然无法分离two_moons数据集这样复杂的形状

5.3DBSCAN
density-based spatial clustering of applications with noise
具有噪声的基于密度的空间聚类应用
主要优点是它不需要用户先验地设置簇的个数，可以划分具有复杂形状的簇，还可以找出不属于任何簇的点
DBSCAN比凝聚聚类和k均值稍慢，仍可以扩展到相对较大的数据集
原理是识别特征空间的“拥挤”区域中的点，在这些区域中许多数据点靠近在一起，称为特征空间中的密集区域
思想是簇形成数据的密集区域，并由相对较空的区域分隔开
密集区域内的点称为核心样本，DBSCAN有两个参数min_samples和eps，如果在距一个给定数据点eps的距离内至少有min_samples个数据点，那这个数据点就是个核心样本，DBSCAN将彼此距离小于eps的核心样本放到同一个簇中

算法首先任意选取一个点，然后找到到这个点的距离小于等于eps的所有的点，如果距起始点的距离在eps之内的数据点个数小于min_samples，那么这个点被标记为噪声，也就是说它不属于任何簇
如果距离在eps之内的数据点个数大于min_samples，则这个点被标记为核心样本并分配一个新的簇标签
然后访问该点的所有邻居（距离eps以内）如果它们还没有被分配一个簇，那么就将刚刚创建的新的簇标签分配给它们，如果它们是核心样本，那么就依次访问其邻居，以此类推，簇逐渐增大，直到在簇的eps距离内没有更多的核心样本为止
然后选取另一个尚未被访问过的点重复相同过程
最后得到三个类型的点，核心点，与核心点距离在eps之内的点（边界点）和噪声
如果DBSCAN在特定数据集上多次运行，那么核心点的聚类始终相同，同样的点也始终被标记为噪声，但边界点可能与不止一个簇的核心样本相邻，因此边界点所属的簇依赖于数据点访问顺序
一般来说只有很少的边界点，这种对访问数据的轻度依赖并不重要
我们将DBSCAN应用于演示凝聚聚类的模拟数据集，与凝聚聚类类似，DBSCAN也不允许对新的测试数据进行预测，所以我们将使用fit_predict方法执行聚类并返回簇标签
在例子中默认参数下，所有数据点都被标记为噪声
增大eps，更多的点在一个簇中，簇会变大，也可能导致多个簇合并成一个，增大min_samples核心点变少
参数eps更重要，它决定了点与点之间接近的含义，eps过小意味着没有点是核心样本，可能导致所有点被标记为噪声，eps过大可能导致所有点形成单个簇
min_samples主要是为了判断稀疏区域内的点被标记为异常值还是形成自己的簇，如果增大min_samples，任何一个包含少许min_samples个样本的簇现在将被标记为噪声，因此它决定簇的最小尺寸
DBSCAN不需要显式设置簇的个数，但设置eps可以隐式地控制找到的簇的个数，使用standardscaler或minmaxscaler对数据进行缩放后有时会很容易找到eps的较好取值，因为缩放保证了所有特征具有相似的范围

在two_moons数据集上运行DBSCAN，利用默认设置，eps为0.5时，算法找到了两个半圆形并将其分开
0.2时会有8个簇，0.7时会有一个簇

在使用DBSCAN时需要谨慎处理返回的簇分配，如果使用簇标签对另一个数据进行索引，那么使用-1表示噪声可能有别的结果
